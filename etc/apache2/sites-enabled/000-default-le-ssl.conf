<IfModule mod_ssl.c>
    <Proxy "balancer://mainnet-rpc-cluster">
        # Add Mainnet RPC here
        BalancerMember "https://rpc.xdcrpc.com"
        BalancerMember "https://erpc.xdcrpc.com"
        BalancerMember "https://earpc.xinfin.network"
        BalancerMember "https://rpc.ankr.com/xdc"
        BalancerMember "https://erpc.xinfin.network"
        BalancerMember "https://rpc.primenumbers.xyz"
        # END Mainnet RPC cluster
        ProxySet lbmethod=byrequests
    </Proxy>
    <Proxy "balancer://mainnet-0xrpc-cluster">
        # Add Mainnet 0xRPC here
        BalancerMember "https://erpc.xdcrpc.com"
        BalancerMember "https://earpc.xinfin.network"
        BalancerMember "https://erpc.xinfin.network"
        BalancerMember "https://rpc.primenumbers.xyz"
        # END Mainnet 0xRPC cluster
        ProxySet lbmethod=byrequests
    </Proxy>
    <Proxy "balancer://mainnet-wss-cluster">
        # Add Mainnet WSS here
        BalancerMember "wss://rpc.xdcrpc.com/ws"
        BalancerMember "wss://erpc.xdcrpc.com/ws"
        BalancerMember "wss://ews.xinfin.network/ws"
        # END Mainnet WSS cluster
        ProxySet lbmethod=byrequests
    </Proxy>
    <Proxy "balancer://mainnet-0xwss-cluster">
        # Add Mainnet 0xWSS here
        BalancerMember "wss://erpc.xdcrpc.com/ws"
        BalancerMember "wss://ews.xinfin.network/ws"
        # END Mainnet 0xWSS cluster
        ProxySet lbmethod=byrequests
    </Proxy>
    <Proxy "balancer://apothem-rpc-cluster">
        # Add Apothem RPC here
        BalancerMember "https://rpc.apothem.network"
        BalancerMember "https://erpc.apothem.network"
        BalancerMember "https://earpc.apothem.network"
        BalancerMember "https://apothem.xdcrpc.com"
        # END Apothem RPC cluster
        ProxySet lbmethod=byrequests
    </Proxy>
    <Proxy "balancer://apothem-0xrpc-cluster">
        # Add Apothem 0xRPC here
        BalancerMember "https://erpc.apothem.network"
        BalancerMember "https://earpc.apothem.network"
        # END Apothem 0xRPC cluster
        ProxySet lbmethod=byrequests
    </Proxy>
    <Proxy "balancer://apothem-wss-cluster">
        # Add Apothem WSS here
        BalancerMember "wss://eaws.apothem.network"
        # END Apothem WSS cluster
        ProxySet lbmethod=byrequests
    </Proxy>
    <Proxy "balancer://apothem-0xwss-cluster">
        # Add Apothem 0xWSS here
        BalancerMember "wss://eaws.apothem.network"
        # END Apothem 0xWSS cluster
        ProxySet lbmethod=byrequests
    </Proxy>
    <VirtualHost *:443>
        ProxyPreserveHost Off
        Redirect 301 / https://xdcchain.xyz/xdc-public-nexus.html
        # Mainnet RPC
        <Location /mainnet-rpc>
            SetOutputFilter RATE_LIMIT
            SetEnv rate-limit 10
            ProxyPass "balancer://mainnet-rpc-cluster/"
            ProxyPassReverse "balancer://mainnet-rpc-cluster/"
        </Location>
        # Mainnet 0xRPC
        <Location /mainnet-0xrpc>
            SetOutputFilter RATE_LIMIT
            SetEnv rate-limit 10
            ProxyPass "balancer://mainnet-0xrpc-cluster/"
            ProxyPassReverse "balancer://mainnet-0xrpc-cluster/"
        </Location>
        # Mainnet WSS
        <Location /mainnet-wss>
            SetOutputFilter RATE_LIMIT
            SetEnv rate-limit 50
            ProxyPass "balancer://mainnet-wss-cluster/"
            ProxyPassReverse "balancer://mainnet-wss-cluster/"
        </Location>
        # Mainnet 0xWSS
        <Location /mainnet-0xwss>
            SetOutputFilter RATE_LIMIT
            SetEnv rate-limit 50
            ProxyPass "balancer://mainnet-0xwss-cluster/"
            ProxyPassReverse "balancer://mainnet-0xwss-cluster/"
        </Location>
        # Apothem RPC
        <Location /apothem-rpc>
            SetOutputFilter RATE_LIMIT
            SetEnv rate-limit 10
            ProxyPass "balancer://apothem-rpc-cluster/"
            ProxyPassReverse "balancer://apothem-rpc-cluster/"
        </Location>
        # Apothem 0xRPC
        <Location /apothem-0xrpc>
            SetOutputFilter RATE_LIMIT
            SetEnv rate-limit 10
            ProxyPass "balancer://apothem-0xrpc-cluster/"
            ProxyPassReverse "balancer://apothem-0xrpc-cluster/"
        </Location>
        # Apothem WSS
        <Location /apothem-wss>
            SetOutputFilter RATE_LIMIT
            SetEnv rate-limit 50
            ProxyPass "balancer://apothem-wss-cluster/"
            ProxyPassReverse "balancer://apothem-wss-cluster/"
        </Location>
        # Apothem 0xWSS
        <Location /apothem-0xwss>
            SetOutputFilter RATE_LIMIT
            SetEnv rate-limit 50
            ProxyPass "balancer://apothem-0xwss-cluster/"
            ProxyPassReverse "balancer://apothem-0xwss-cluster/"
        </Location>
        SSLEngine On
        SSLProxyEngine On
        ServerName publicnexus.xdcchain.xyz
        SSLCertificateFile /etc/letsencrypt/live/publicnexus.xdcchain.xyz/fullchain.pem
        SSLCertificateKeyFile /etc/letsencrypt/live/publicnexus.xdcchain.xyz/privkey.pem
        Include /etc/letsencrypt/options-ssl-apache.conf
        # Set request timeouts to prevent slow HTTP attacks
        RequestReadTimeout header=20-40,minrate=500 body=20,minrate=500
        ErrorLog ${APACHE_LOG_DIR}/error.log
        CustomLog ${APACHE_LOG_DIR}/access.log combined
        # LogLevel debug ssl:trace3
    </VirtualHost>
</IfModule>
